{% extends 'base.html' %}
{% load objects_extras %}
{% load static %}

{% block content %}
	<div class="row col-md-12 col-lg-12 ">
		<div class="mx-auto mb-2 col-md-12 col-lg-12">
			<h4 class="display-5 text-center">Номинация: <b>{{ nomination }}</b></h4>
		</div>
		<form action="" method="post" class="mx-auto col-md-12 col-lg-12"> {% csrf_token %}
			<div class="mx-auto my-5 col-md-12 col-lg-12">
				<ul class="nav nav-tabs" id="myTab">
					<li class="nav-item">
						<a class="nav-link active" href="#type_1">Студенты СПО</a>
					</li>
					<li class="nav-item">
						<a class="nav-link" href="#type_2">Студенты ВПО</a>
					</li>
					<li class="nav-item">
						<a class="nav-link" href="#type_3">Преподаватели, руководители коллективов</a>
					</li>
					<li class="nav-item">
						<a class="nav-link" href="#type_4">Любительские коллективы</a>
					</li>
				</ul>
			</div>

			<div class="tab-content col-md-12 col-lg-12">
				<div class="tab-pane active" id="type_1" role="tab-panel">
					<h6>Очное участие</h6>
					<table class="table">
						<thead>
							<tr>
								<th scope="col" class="table-cel-width-5 align-middle">№</th>
								<th scope="col" class="table-cel-width-20 align-middle">Название работы</th>
								<th scope="col" class="table-cel-width-20 align-middle">Конкурсант</th>
								<th scope="col" class="table-cel-width-20 align-middle">Преподаватель</th>
								<th scope="col" class="table-cel-width-25 align-middle">Учреждение</th>
								<th scope="col" class="table-cel-width-10 align-middle text-center">Оценка</th>
							</tr>
						</thead>
						<tbody>
							{% for key, val in sorting_1_1 %}
							{% with picture=pictures_list_1_1|lookup:key %}
								<tr class="table_hover" child-href="{% url 'view_contestant' pk=picture.author.profile.pk %}">
									<td scope="row" class="align-middle table_click">{{ forloop.counter }}</td>
									<td class="align-middle table_click">{{ picture.name }}</td>
									<td class="align-middle table_click">{{ picture.author.profile.get_full_name }}</td>
									<td class="align-middle table_click">{% for copicture in copictures|lookup:key %}{{ copicture.coauthor.get_file_name }} ({{ copicture.coauthor.get_profile_type_display }})<br>{% endfor %}</td>
									<td class="align-middle table_click">{{ picture.author.profile.institution }}</td>
									<td class="align-middle text-center table_click">{{ val }}</td>
								</tr>
							{% endwith %}
							{% endfor %}
						</tbody>
					</table>

					<div class="row col-md-12 col-lg-12 ">
						<div class="col-md-12 text-right pb-3">
							<input type="submit" value="Выгрузить список" name="type_1_1">
						</div>
					</div>

					<h6>Заочное участие</h6>
					<table class="table">
						<thead>
							<tr>
								<th scope="col" class="table-cel-width-5 align-middle">№</th>
								<th scope="col" class="table-cel-width-20 align-middle">Название работы</th>
								<th scope="col" class="table-cel-width-20 align-middle">Конкурсант</th>
								<th scope="col" class="table-cel-width-20 align-middle">Преподаватель</th>
								<th scope="col" class="table-cel-width-25 align-middle">Учреждение</th>
								<th scope="col" class="table-cel-width-10 align-middle text-center">Оценка</th>
							</tr>
						</thead>
						<tbody>
							{% for key, val in sorting_1_2 %}
							{% with picture=pictures_list_1_2|lookup:key %}
								<tr class="table_hover" child-href="{% url 'view_contestant' pk=picture.author.profile.pk %}">
									<td scope="row" class="align-middle table_click">{{ forloop.counter }}</td>
									<td class="align-middle table_click">{{ picture.name }}</td>
									<td class="align-middle table_click">{{ picture.author.profile.get_full_name }}</td>
									<td class="align-middle table_click">{% for copicture in copictures|lookup:key %}{{ copicture.coauthor.get_file_name }} ({{ copicture.coauthor.get_profile_type_display }})<br>{% endfor %}</td>
									<td class="align-middle table_click">{{ picture.author.profile.institution }}</td>
									<td class="align-middle text-center table_click">{{ val }}</td>
								</tr>
							{% endwith %}
							{% endfor %}
						</tbody>
					</table>

					<div class="row col-md-12 col-lg-12 ">
						<div class="col-md-12 text-right pb-3">
							<input type="submit" value="Выгрузить список" name="type_1_2">
						</div>
					</div>
				</div>

				<div class="tab-pane" id="type_2" role="tab-panel">
					<h6>Очное участие</h6>
					<table class="table">
						<thead>
							<tr>
								<th scope="col" class="table-cel-width-5 align-middle">№</th>
								<th scope="col" class="table-cel-width-20 align-middle">Название работы</th>
								<th scope="col" class="table-cel-width-20 align-middle">Конкурсант</th>
								<th scope="col" class="table-cel-width-20 align-middle">Преподаватель</th>
								<th scope="col" class="table-cel-width-25 align-middle">Учреждение</th>
								<th scope="col" class="table-cel-width-10 align-middle text-center">Оценка</th>
							</tr>
						</thead>
						<tbody>
							{% for key, val in sorting_2_1 %}
							{% with picture=pictures_list_2_1|lookup:key %}
								<tr class="table_hover" child-href="{% url 'view_contestant' pk=picture.author.profile.pk %}">
									<td scope="row" class="align-middle table_click">{{ forloop.counter }}</td>
									<td class="align-middle table_click">{{ picture.name }}</td>
									<td class="align-middle table_click">{{ picture.author.profile.get_full_name }}</td>
									<td class="align-middle table_click">{% for copicture in copictures|lookup:key %}{{ copicture.coauthor.get_file_name }} ({{ copicture.coauthor.get_profile_type_display }})<br>{% endfor %}</td>
									<td class="align-middle table_click">{{ picture.author.profile.institution }}</td>
									<td class="align-middle text-center table_click">{{ val }}</td>
								</tr>
							{% endwith %}
							{% endfor %}
						</tbody>
					</table>

					<div class="row col-md-12 col-lg-12 ">
						<div class="col-md-12 text-right pb-3">
							<input type="submit" value="Выгрузить список" name="type_2_1">
						</div>
					</div>

					<h6>Заочное участие</h6>
					<table class="table">
						<thead>
							<tr>
								<th scope="col" class="table-cel-width-5 align-middle">№</th>
								<th scope="col" class="table-cel-width-20 align-middle">Название работы</th>
								<th scope="col" class="table-cel-width-20 align-middle">Конкурсант</th>
								<th scope="col" class="table-cel-width-20 align-middle">Преподаватель</th>
								<th scope="col" class="table-cel-width-25 align-middle">Учреждение</th>
								<th scope="col" class="table-cel-width-10 align-middle text-center">Оценка</th>
							</tr>
						</thead>
						<tbody>
							{% for key, val in sorting_2_2 %}
							{% with picture=pictures_list_2_2|lookup:key %}
								<tr class="table_hover" child-href="{% url 'view_contestant' pk=picture.author.profile.pk %}">
									<td scope="row" class="align-middle table_click">{{ forloop.counter }}</td>
									<td class="align-middle table_click">{{ picture.name }}</td>
									<td class="align-middle table_click">{{ picture.author.profile.get_full_name }}</td>
									<td class="align-middle table_click">{% for copicture in copictures|lookup:key %}{{ copicture.coauthor.get_file_name }} ({{ copicture.coauthor.get_profile_type_display }})<br>{% endfor %}</td>
									<td class="align-middle table_click">{{ picture.author.profile.institution }}</td>
									<td class="align-middle text-center table_click">{{ val }}</td>
								</tr>
							{% endwith %}
							{% endfor %}
						</tbody>
					</table>

					<div class="row col-md-12 col-lg-12 ">
						<div class="col-md-12 text-right pb-3">
							<input type="submit" value="Выгрузить список" name="type_2_2">
						</div>
					</div>
				</div>

				<div class="tab-pane" id="type_3" role="tab-panel">
					<h6>Очное участие</h6>
					<table class="table">
						<thead>
							<tr>
								<th scope="col" class="table-cel-width-5 align-middle">№</th>
								<th scope="col" class="table-cel-width-20 align-middle">Название работы</th>
								<th scope="col" class="table-cel-width-20 align-middle">Конкурсант</th>
								<th scope="col" class="table-cel-width-20 align-middle">Преподаватель</th>
								<th scope="col" class="table-cel-width-25 align-middle">Учреждение</th>
								<th scope="col" class="table-cel-width-10 align-middle text-center">Оценка</th>
							</tr>
						</thead>
						<tbody>
							{% for key, val in sorting_3_1 %}
							{% with picture=pictures_list_3_1|lookup:key %}
								<tr class="table_hover" child-href="{% url 'view_contestant' pk=picture.author.profile.pk %}">
									<td scope="row" class="align-middle table_click">{{ forloop.counter }}</td>
									<td class="align-middle table_click">{{ picture.name }}</td>
									<td class="align-middle table_click">{{ picture.author.profile.get_full_name }}</td>
									<td class="align-middle table_click">{% for copicture in copictures|lookup:key %}{{ copicture.coauthor.get_file_name }} ({{ copicture.coauthor.get_profile_type_display }})<br>{% endfor %}</td>
									<td class="align-middle table_click">{{ picture.author.profile.institution }}</td>
									<td class="align-middle text-center table_click">{{ val }}</td>
								</tr>
							{% endwith %}
							{% endfor %}
						</tbody>
					</table>

					<div class="row col-md-12 col-lg-12 ">
						<div class="col-md-12 text-right pb-3">
							<input type="submit" value="Выгрузить список" name="type_3_1">
						</div>
					</div>

					<h6>Заочное участие</h6>
					<table class="table">
						<thead>
							<tr>
								<th scope="col" class="table-cel-width-5 align-middle">№</th>
								<th scope="col" class="table-cel-width-20 align-middle">Название работы</th>
								<th scope="col" class="table-cel-width-20 align-middle">Конкурсант</th>
								<th scope="col" class="table-cel-width-20 align-middle">Преподаватель</th>
								<th scope="col" class="table-cel-width-25 align-middle">Учреждение</th>
								<th scope="col" class="table-cel-width-10 align-middle text-center">Оценка</th>
							</tr>
						</thead>
						<tbody>
							{% for key, val in sorting_3_2 %}
							{% with picture=pictures_list_3_2|lookup:key %}
								<tr class="table_hover" child-href="{% url 'view_contestant' pk=picture.author.profile.pk %}">
									<td scope="row" class="align-middle table_click">{{ forloop.counter }}</td>
									<td class="align-middle table_click">{{ picture.name }}</td>
									<td class="align-middle table_click">{{ picture.author.profile.get_full_name }}</td>
									<td class="align-middle table_click">{% for copicture in copictures|lookup:key %}{{ copicture.coauthor.get_file_name }} ({{ copicture.coauthor.get_profile_type_display }})<br>{% endfor %}</td>
									<td class="align-middle table_click">{{ picture.author.profile.institution }}</td>
									<td class="align-middle text-center table_click">{{ val }}</td>
								</tr>
							{% endwith %}
							{% endfor %}
						</tbody>
					</table>

					<div class="row col-md-12 col-lg-12 ">
						<div class="col-md-12 text-right pb-3">
							<input type="submit" value="Выгрузить список" name="type_3_2">
						</div>
					</div>
				</div>

				<div class="tab-pane" id="type_4" role="tab-panel">
					<h6>Очное участие</h6>
					<table class="table">
						<thead>
							<tr>
								<th scope="col" class="table-cel-width-5 align-middle">№</th>
								<th scope="col" class="table-cel-width-20 align-middle">Название работы</th>
								<th scope="col" class="table-cel-width-20 align-middle">Конкурсант</th>
								<th scope="col" class="table-cel-width-20 align-middle">Преподаватель</th>
								<th scope="col" class="table-cel-width-25 align-middle">Учреждение</th>
								<th scope="col" class="table-cel-width-10 align-middle text-center">Оценка</th>
							</tr>
						</thead>
						<tbody>
							{% for key, val in sorting_4_1 %}
							{% with picture=pictures_list_4_1|lookup:key %}
								<tr class="table_hover" child-href="{% url 'view_contestant' pk=picture.author.profile.pk %}">
									<td scope="row" class="align-middle table_click">{{ forloop.counter }}</td>
									<td class="align-middle table_click">{{ picture.name }}</td>
									<td class="align-middle table_click">{{ picture.author.profile.get_full_name }}</td>
									<td class="align-middle table_click">{% for copicture in copictures|lookup:key %}{{ copicture.coauthor.get_file_name }} ({{ copicture.coauthor.get_profile_type_display }})<br>{% endfor %}</td>
									<td class="align-middle table_click">{{ picture.author.profile.institution }}</td>
									<td class="align-middle text-center table_click">{{ val }}</td>
								</tr>
							{% endwith %}
							{% endfor %}
						</tbody>
					</table>

					<div class="row col-md-12 col-lg-12 ">
						<div class="col-md-12 text-right pb-3">
							<input type="submit" value="Выгрузить список" name="type_4_1">
						</div>
					</div>

					<h6>Заочное участие</h6>
					<table class="table">
						<thead>
							<tr>
								<th scope="col" class="table-cel-width-5 align-middle">№</th>
								<th scope="col" class="table-cel-width-20 align-middle">Название работы</th>
								<th scope="col" class="table-cel-width-20 align-middle">Конкурсант</th>
								<th scope="col" class="table-cel-width-20 align-middle">Преподаватель</th>
								<th scope="col" class="table-cel-width-25 align-middle">Учреждение</th>
								<th scope="col" class="table-cel-width-10 align-middle text-center">Оценка</th>
							</tr>
						</thead>
						<tbody>
							{% for key, val in sorting_4_2 %}
							{% with picture=pictures_list_4_2|lookup:key %}
								<tr class="table_hover" child-href="{% url 'view_contestant' pk=picture.author.profile.pk %}">
									<td scope="row" class="align-middle table_click">{{ forloop.counter }}</td>
									<td class="align-middle table_click">{{ picture.name }}</td>
									<td class="align-middle table_click">{{ picture.author.profile.get_full_name }}</td>
									<td class="align-middle table_click">{% for copicture in copictures|lookup:key %}{{ copicture.coauthor.get_file_name }} ({{ copicture.coauthor.get_profile_type_display }})<br>{% endfor %}</td>
									<td class="align-middle table_click">{{ picture.author.profile.institution }}</td>
									<td class="align-middle text-center table_click">{{ val }}</td>
								</tr>
							{% endwith %}
							{% endfor %}
						</tbody>
					</table>

					<div class="row col-md-12 col-lg-12 ">
						<div class="col-md-12 text-right pb-3">
							<input type="submit" value="Выгрузить список" name="type_4_2">
						</div>
					</div>
				</div>
			</div>
		
		</form>
	</div>
{% endblock %}

{% block scripts %}
    {{ block.super }}
	<script type="text/javascript">
		$(document).ready(function() {
			$('.table_click').click(function(){
				url = $(this).parent().attr('child-href');
				col = parseInt($(this).index());
				if (col != 5)
					document.location.href = url;
			});


			$('#myTab a').on('click', function(e){
				e.preventDefault();
				$(this).tab('show')
			});
		});
	</script>
{% endblock %}
